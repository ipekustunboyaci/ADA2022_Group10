#Order Approval Process
main:
  params: [args]
  steps:
    - initGetInventory:
        assign:
          - UpdateInventory: ${"http://35.184.29.9:5002/inventory/" + string(args.store_id)}
    - checkInventoryAvailable:
        call: http.patch
        args:
          url: ${UpdateInventory}
          body: ${args.items}
        result: UpdatedInventory
    - conditionOnInventory:
        switch:
          - condition: ${UpdatedInventory.code != 200}
            steps:
              - rejectDelivery:
                  return: ${"Stock not available anymore"}
    - return_output:
        return: ${"Confirm_courier"}